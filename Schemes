TABLE LIST:

  CREATE TYPE PER_SEX AS ENUM ('Male', 'Female')

  CREATE TABLE USERS(
      id SERIAL PRIMARY KEY,
      first_name TEXT NOT NULL,
      last_name TEXT NOT NULL ,
      email TEXT UNIQUE NOT NULL ,
      phone_number TEXT UNIQUE NOT NULL ,
      sex PER_SEX,
      bitrh_date DATE,
      image_url TEXT
    )
  
CREATE TABLE COUNTRIES(
      id SERIAL PRIMARY KEY,
      country_name TEXT UNIQUE NOT NULL,
      commission MONEY NOT NULL
    )

  CREATE TABLE APARTMENTS(
      id SERIAL PRIMARY KEY, 
      host_id INT, 
      latitude NUMERIC CHECK (latitude >= -180 AND latitude <= 180),
      longitude NUMERIC CHECK (longitude >= -180 AND longitude <= 180), 
      country_id INT, 
      address TEXT NOT NULL,  
      name TEXT NOT NULL, 
      album_url TEXT NOT NULL, 
      cleaning_price MONEY,
      CONSTRAINT FK_HOSTS FOREIGN KEY (host_id) REFERENCES USERS(id),
      CONSTRAINT FK_COUNTRIES FOREIGN KEY (country_id) REFERENCES COUNTRIES(id)
    )
  
  CREATE TABLE APARTMENT_PRICES(
      id SERIAL PRIMARY KEY,
      apartment_id INT,
      start_date TIMESTAMP NOT NULL,
      end_date TIMESTAMP NOT NULL CHECK(end_date > start_date),
      daily_price MONEY NOT NULL,
      CONSTRAINT fk_apartment FOREIGN KEY(apartment_id) REFERENCES APARTMENTS(id)
    )
  
  CREATE TABLE AMENITIES(
      apartment_id INT,
      wifi BOOLEAN,
      tv BOOLEAN,
      pets BOOLEAN,
      CONSTRAINT fk_apartment FOREIGN KEY(apartment_id) REFERENCES APARTMENTS(id)
    ) // ALTER_TABLE ADD_COLUMN when needed, new columns false by default // НУЛЛ лучше по умолчанию - мы не знаем про старое жилье, есть ли оно (удобство) там или нет. А false - точно нет.

  
  CREATE TABLE APARTMENT_REVIEWS(
      id SERIAL PRIMARY KEY,
      contract_id INT,
      grade1 INT CHECK (grade1 > 0 AND grade1 < 6),
      grade2 INT CHECK (grade2 > 0 AND grade2 < 6),
      grade3 INT CHECK (grade3 > 0 AND grade3 < 6),
      CONSTRAINT fk_contract FOREIGN KEY(contract_id) REFERENCES CONTRACTS(id)
    ) // gradeX - оценка по параметру

  CREATE TABLE TENANT_REVIEWS(
      id SERIAL PRIMARY KEY,
      contract_id INT,
      text TEXT,
      grade INT CHECK (grade > 0 AND grade < 6),
      CONSTRAINT fk_contract FOREIGN KEY(contract_id) REFERENCES CONTRACTS(id)
    )
  
  CREATE TYPE CTR_STATUS AS ENUM ('created', 'denied', 'processing')

  CREATE TABLE CONTRACTS(
      id SERIAL PRIMARY KEY,
      status CTR_STATUS NOT NULL,
      tenant_id INT,
      apartment_id INT,
      num_of_ppl INT CHECK (num_of_ppl > 0) NOT NULL,
      start_date TIMESTAMP NOT NULL,
      end_date TIMESTAMP NOT NULL CHECK (end_date >= start_date),
      CONSTRAINT fk_tenant FOREIGN KEY(tenant_id) REFERENCES USERS(id),
      CONSTRAINT fk_apartment FOREIGN KEY(apartment_id) REFERENCES APARTMENTS(id)
    )

  CREATE TYPE ATR_GENRE AS ENUM ('museum', 'festival')

  CREATE TABLE ATTRACTIONS(
      id SERIAL PRIMARY KEY,
      name TEXT NOT NULL,
      start_date TIMESTAMP,
      end_date TIMESTAMP CHECK (end_date >= start_date),
      latitude NUMERIC CHECK (latitude >= -80 AND latitude <= 180),
      longitude NUMERIC CHECK (longitude >= -180 AND longitude <= 180),
      genre ATR_GENRE NOT NULL
    ) // start_date и end_date может быть NULL - если достопримечательность вечна
  
  
